<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Estudos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>

  <style>
    /* ... mantenha os mesmos estilos que vocÃª jÃ¡ tinha (fire-text, crown, etc.) ... */
  </style>
</head>
<body class="bg-zinc-950 text-white min-h-screen">

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="fixed inset-0 bg-zinc-950 flex items-center justify-center z-50">
  <div class="text-center">
    <h1 class="text-6xl font-bold mb-4">Estudos</h1>
    <p class="text-xl text-zinc-400 mb-10">Aprenda junto com a comunidade</p>
    <button id="googleLoginBtn"
            class="bg-white text-black px-8 py-4 rounded-2xl font-semibold flex items-center gap-3 mx-auto hover:bg-zinc-200 transition cursor-pointer">
      <i class="fab fa-google text-xl"></i>
      Entrar com Google
    </button>
  </div>
</div>

<!-- MAIN APP (o resto do HTML continua igual ao que vocÃª jÃ¡ tem) -->
<div id="mainApp" class="hidden flex h-screen">
  <!-- ... todo o conteÃºdo da sidebar, tabs, chats, estudos, perfil ... -->
</div>

<script>
// ==================== CONFIG FIREBASE ====================
const firebaseConfig = {
  apiKey:            "SUA_API_KEY_AQUI",
  authDomain:        "SEU_PROJETO.firebaseapp.com",
  projectId:         "SEU_PROJETO",
  storageBucket:     "SEU_PROJETO.appspot.com",
  messagingSenderId: "123456789012",
  appId:             "1:123456789012:web:abcdef1234567890abcdef"
};

// Inicializa Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// ==================== LOGIN REAL COM GOOGLE ====================
document.getElementById('googleLoginBtn').addEventListener('click', () => {
  const provider = new firebase.auth.GoogleAuthProvider();
  provider.addScope('email profile');

  auth.signInWithPopup(provider)
    .then((result) => {
      const user = result.user;
      
      // Atualiza dados do usuÃ¡rio
      currentUser = {
        id: user.uid.substring(0,8), // ou use um contador prÃ³prio
        name: user.displayName || "UsuÃ¡rio",
        photo: user.photoURL || "https://i.pravatar.cc/128",
        bio: "Estudando para o futuro ðŸ”¥",
        premium: false,
        status: "online",
        email: user.email
      };

      // Atualiza interface
      document.getElementById('topAvatar').src = currentUser.photo;
      document.getElementById('profileAvatarBig').src = currentUser.photo;
      document.getElementById('profileName').textContent = currentUser.name;
      document.getElementById('profileId').textContent = `ID ${currentUser.id}`;

      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');

      // Carrega o resto
      changeTab(0);
      loadChatList();
      renderSubjects();
      renderFeed();

      console.log("Login realizado:", user.displayName);
    })
    .catch((error) => {
      console.error("Erro no login:", error);
      alert("NÃ£o foi possÃ­vel fazer login.\n" + error.message);
    });
});

// Monitora estado de autenticaÃ§Ã£o (para recarregar se jÃ¡ estiver logado)
auth.onAuthStateChanged((user) => {
  if (user) {
    // JÃ¡ estÃ¡ logado â†’ pula direto pro app
    currentUser = {
      id: user.uid.substring(0,8),
      name: user.displayName || "UsuÃ¡rio",
      photo: user.photoURL || "https://i.pravatar.cc/128",
      bio: "Estudando para o futuro ðŸ”¥",
      premium: false,
      status: "online"
    };

    document.getElementById('topAvatar').src = currentUser.photo;
    document.getElementById('profileAvatarBig').src = currentUser.photo;
    document.getElementById('profileName').textContent = currentUser.name;

    document.getElementById('loginScreen').classList.add('hidden');
    document.getElementById('mainApp').classList.remove('hidden');

    changeTab(0);
    loadChatList();
    renderSubjects();
    renderFeed();
  }
});

// ... o resto do seu JavaScript continua igual (changeTab, chats, premium, chuva de emojis, etc.) ...
</script>
</body>
</html>
