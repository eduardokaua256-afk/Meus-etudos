<!DOCTYPE html>
<html lang="pt-br" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Estudos-s ‚Ä¢ Estude com amigos e IA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', system-ui, sans-serif; }
    
    .fire-border {
      position: relative;
      border: 3px solid transparent;
      background: linear-gradient(#111, #111) padding-box,
                  linear-gradient(45deg, #ffeb3b, #ff9800, #f44336, #ffeb3b) border-box;
      animation: fire 2s linear infinite;
    }
    @keyframes fire { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
    
    .crown { filter: drop-shadow(0 0 12px #ffd700); }
    .avatar-premium { box-shadow: 0 0 25px #ffd700, 0 0 40px #ffeb3b; }
    
    .modal { animation: modalPop 0.3s ease; }
    @keyframes modalPop { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    
    .chat-bubble { max-width: 78%; padding: 12px 18px; border-radius: 20px; position: relative; }
    .received { background: #1f2937; border-bottom-left-radius: 4px; }
    .sent { background: linear-gradient(135deg, #00bfff, #1e90ff); color: white; border-bottom-right-radius: 4px; }
    
    .draggable { cursor: move; user-select: none; }
  </style>
</head>
<body class="bg-[#0a0a0a] text-white min-h-screen overflow-hidden">

  <!-- ================== NAVBAR (estilo X) ================== -->
  <nav class="fixed top-0 left-0 right-0 bg-[#0a0a0a] border-b border-gray-800 z-50">
    <div class="max-w-screen-2xl mx-auto px-4 h-14 flex items-center justify-between">
      <div class="flex items-center gap-8">
        <!-- Logo -->
        <div onclick="showPage('home')" class="text-3xl font-bold tracking-tighter cursor-pointer">Estudos-s</div>
        
        <!-- Tr√™s pontinhos esquerdo -->
        <button onclick="toggleLeftMenu()" class="text-2xl hover:text-cyan-400 transition">
          <i class="fa-solid fa-ellipsis-vertical"></i>
        </button>
      </div>

      <!-- Pesquisa central -->
      <div class="flex-1 max-w-xl mx-8">
        <input id="globalSearch" type="text" placeholder="Pesquisar grupos, mensagens, mat√©rias..." 
               class="w-full bg-gray-900 border border-gray-700 rounded-full py-2.5 px-6 focus:outline-none focus:border-cyan-400">
      </div>

      <!-- Perfil superior direito -->
      <div onclick="openProfileModal()" class="flex items-center gap-3 cursor-pointer group">
        <div id="navAvatar" class="w-9 h-9 rounded-2xl overflow-hidden border-2 border-transparent group-hover:border-cyan-400 transition">
          <img id="navAvatarImg" src="https://i.imgur.com/0z0z0z0.png" class="w-full h-full object-cover" alt="">
        </div>
        <div>
          <div id="navName" class="font-semibold text-sm">Fundador</div>
          <div class="flex items-center gap-1.5 text-xs">
            <div class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></div>
            <span id="navStatus" class="text-emerald-400">Online</span>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="flex pt-14 max-w-screen-2xl mx-auto h-screen">

    <!-- ================== SIDEBAR ESQUERDA ================== -->
    <div class="w-64 bg-[#111] border-r border-gray-800 h-full p-4 flex flex-col">
      <button onclick="showPage('home')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-house"></i> In√≠cio
      </button>
      <button onclick="showPage('grupos')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-users"></i> Meus Grupos
      </button>
      <button onclick="showPage('chatGeral')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-comments"></i> Chat Geral
      </button>
      <button onclick="showPage('ia')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-brain"></i> IA Estudo
      </button>
      <button onclick="showPage('flashcards')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-cards"></i> Flashcards
      </button>
      <button onclick="showPage('pomodoro')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-clock"></i> Pomodoro
      </button>
      <button onclick="showPage('materias')" class="sidebar-btn flex items-center gap-3 px-4 py-3 rounded-2xl hover:bg-gray-800 w-full text-left">
        <i class="fa-solid fa-book"></i> Mat√©rias
      </button>

      <div class="mt-auto pt-6 border-t border-gray-800">
        <button onclick="togglePremium()" id="premiumBtn" 
                class="w-full bg-gradient-to-r from-yellow-400 to-amber-500 text-black font-bold py-3 rounded-2xl flex items-center justify-center gap-2">
          <i class="fa-solid fa-crown"></i> Premium
        </button>
      </div>
    </div>

    <!-- ================== CONTE√öDO CENTRAL ================== -->
    <div class="flex-1 overflow-auto p-6" id="mainContent">

      <!-- HOME / DASHBOARD -->
      <div id="homePage" class="page">
        <h1 class="text-4xl font-bold mb-8">Bem-vindo ao Estudos-s, <span id="homeName" class="text-cyan-400"></span>!</h1>
        <div class="grid grid-cols-3 gap-6">
          <!-- Cards de progresso -->
        </div>
      </div>

      <!-- GRUPOS -->
      <div id="gruposPage" class="page hidden">
        <div class="flex justify-between mb-6">
          <h2 class="text-3xl font-bold">Meus Grupos</h2>
          <button onclick="openCreateGroupModal()" class="bg-cyan-500 hover:bg-cyan-400 text-black px-6 py-2 rounded-2xl font-semibold flex items-center gap-2">
            <i class="fa-solid fa-plus"></i> Criar Grupo
          </button>
        </div>
        <div id="groupsGrid" class="grid grid-cols-4 gap-6"></div>
      </div>

      <!-- CHAT GERAL -->
      <div id="chatGeralPage" class="page hidden flex flex-col h-[calc(100vh-100px)]">
        <div class="bg-gray-900 p-4 border-b border-gray-800 flex items-center gap-4">
          <div class="w-10 h-10 bg-emerald-500 rounded-2xl flex items-center justify-center text-2xl">üåç</div>
          <div>
            <h3 class="font-bold">Chat Geral</h3>
            <p class="text-xs text-emerald-400">Todos os usu√°rios ‚Ä¢ Fundador: @Estudos-s</p>
          </div>
        </div>
        <div id="chatGeralMessages" class="flex-1 overflow-y-auto p-6 space-y-4"></div>
        <div class="p-4 bg-gray-900 border-t border-gray-800">
          <div class="flex gap-3">
            <input id="chatGeralInput" type="text" placeholder="Mensagem no Chat Geral..." class="flex-1 bg-gray-800 rounded-full px-6 py-3" onkeypress="if(event.key==='Enter') sendGeralMessage()">
            <button onclick="sendGeralMessage()" class="bg-cyan-500 text-black w-12 h-12 rounded-full">‚Üí</button>
          </div>
        </div>
      </div>

      <!-- IA -->
      <div id="iaPage" class="page hidden">
        <h2 class="text-3xl font-bold mb-6">IA para Estudos</h2>
        <div id="iaChat" class="bg-gray-900 rounded-3xl h-96 overflow-y-auto p-6"></div>
        <div class="flex mt-4">
          <input id="iaInput" type="text" placeholder="Pergunte qualquer coisa sobre estudos..." class="flex-1 bg-gray-800 rounded-l-3xl px-6 py-4" onkeypress="if(event.key==='Enter') askIA()">
          <button onclick="askIA()" class="bg-violet-600 px-8 rounded-r-3xl">Enviar</button>
        </div>
      </div>

      <!-- Flashcards, Pomodoro, Mat√©rias... (mesmo padr√£o) -->
      <!-- ... (c√≥digo completo abaixo) -->
    </div>

    <!-- ================== SIDEBAR DIREITA (online, trending) ================== -->
    <div class="w-80 bg-[#111] border-l border-gray-800 h-full p-6 hidden lg:block">
      <h3 class="font-bold mb-4">Online agora</h3>
      <div id="onlineList" class="space-y-4"></div>
    </div>
  </div>

  <!-- ================== MODAIS PRINCIPAIS ================== -->
  <!-- Profile Modal -->
  <div id="profileModal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
    <div class="bg-[#111] w-full max-w-2xl rounded-3xl overflow-hidden modal">
      <!-- Banner -->
      <div id="banner" onclick="changeBanner()" class="h-48 bg-gradient-to-r from-cyan-600 to-blue-600 relative cursor-pointer">
        <div id="bannerOverlay" class="absolute inset-0 bg-black/30 flex items-center justify-center text-xs opacity-0 hover:opacity-100 transition">Clique para trocar banner (Premium: GIF)</div>
      </div>
      
      <!-- Avatar + Nome -->
      <div class="px-8 -mt-12 flex items-end gap-6">
        <div onclick="changeAvatar()" class="w-28 h-28 rounded-3xl border-4 border-[#111] overflow-hidden cursor-pointer relative">
          <img id="modalAvatar" src="https://i.imgur.com/0z0z0z0.png" class="w-full h-full object-cover">
          <div id="crown" class="hidden absolute -top-3 -right-3 text-4xl">üëë</div>
        </div>
        <div class="mb-4">
          <div id="modalName" class="text-3xl font-bold"></div>
          <div class="flex items-center gap-3 text-sm">
            <span id="modalID" class="font-mono text-cyan-400 animate-pulse cursor-pointer" onclick="copyID()">ID: 000022</span>
            <span class="text-emerald-400">‚Ä¢ Online agora</span>
          </div>
        </div>
      </div>

      <!-- Bio -->
      <div class="px-8 mt-6">
        <div class="bg-gray-900 border-l-4 border-cyan-400 p-5 rounded-r-2xl">
          <textarea id="bioText" class="w-full bg-transparent focus:outline-none resize-none h-20" placeholder="Sua bio..."></textarea>
        </div>
      </div>

      <!-- Acess√≥rios (s√≥ Premium) -->
      <div class="px-8 mt-8">
        <p class="text-xs text-gray-400 mb-3">Acess√≥rios (Premium)</p>
        <div class="flex gap-4">
          <button onclick="addAccessory('üëë')" class="text-3xl hover:scale-110 transition">üëë</button>
          <button onclick="addAccessory('üß∏')" class="text-3xl hover:scale-110 transition">üß∏</button>
          <button onclick="addAccessory('üé©')" class="text-3xl hover:scale-110 transition">üé©</button>
          <button onclick="addAccessory('üìñ')" class="text-3xl hover:scale-110 transition">üìñ</button>
        </div>
      </div>

      <div class="p-8 flex justify-end gap-4 border-t border-gray-800">
        <button onclick="closeProfileModal()" class="px-6 py-2 text-gray-400">Cancelar</button>
        <button onclick="saveProfile()" class="bg-cyan-500 text-black px-8 py-2 rounded-2xl font-semibold">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Create Group Modal -->
  <div id="createGroupModal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50">
    <div class="bg-[#111] w-full max-w-md rounded-3xl p-8 modal">
      <h3 class="text-2xl font-bold mb-6">Criar Grupo</h3>
      <input id="groupNameInput" type="text" placeholder="Nome do grupo" class="w-full bg-gray-900 border border-gray-700 rounded-2xl px-6 py-4 mb-4">
      <textarea id="groupBioInput" placeholder="Descri√ß√£o" class="w-full bg-gray-900 border border-gray-700 rounded-2xl px-6 py-4 h-28"></textarea>
      <button onclick="createGroup()" class="mt-6 w-full bg-cyan-500 text-black py-4 rounded-2xl font-bold">Criar Grupo</button>
    </div>
  </div>

  <!-- Floating Calculator -->
  <div id="calcModal" class="hidden fixed bottom-8 right-8 bg-[#111] border border-gray-700 rounded-3xl shadow-2xl w-80 draggable" style="touch-action: none;">
    <div class="p-4 border-b border-gray-700 flex items-center justify-between cursor-move" onmousedown="dragModal(event, this.parentElement)">
      <span class="font-semibold">Calculadora</span>
      <button onclick="document.getElementById('calcModal').classList.add('hidden')" class="text-gray-400">‚úï</button>
    </div>
    <div class="p-6">
      <input id="calcDisplay" type="text" readonly class="w-full text-right text-4xl font-mono bg-transparent border-b border-gray-600 py-4 mb-6">
      <div class="grid grid-cols-4 gap-3 text-xl">
        <!-- bot√µes da calculadora (simples) -->
        <button onclick="calcClear()" class="col-span-2 bg-red-500/10 py-5 rounded-2xl">C</button>
        <button onclick="calcAppend('(')" class="bg-gray-800 py-5 rounded-2xl">(</button>
        <button onclick="calcAppend(')')" class="bg-gray-800 py-5 rounded-2xl">)</button>
        <!-- mais bot√µes... -->
      </div>
    </div>
  </div>

  <script>
    // ================== CONFIGURA√á√ÉO GLOBAL ==================
    let currentUser = { username: "Fundador", id: "000022", premium: false, bio: "Fundador do Site Estudos-s", avatar: "https://i.imgur.com/0z0z0z0.png" };
    let groups = [];
    let messages = {}; // groupId ‚Üí array
    let geralMessages = [];
    let isPremium = false;

    // ================== LOGIN (simulado) ==================
    function initUser() {
      const saved = localStorage.getItem("estudoss_user");
      if (saved) currentUser = JSON.parse(saved);
      document.getElementById("navName").textContent = currentUser.username;
      document.getElementById("homeName").textContent = currentUser.username;
      document.getElementById("navAvatarImg").src = currentUser.avatar;
    }

    // ================== PROFILE MODAL ==================
    function openProfileModal() {
      document.getElementById("profileModal").classList.remove("hidden");
      document.getElementById("modalName").textContent = currentUser.username;
      document.getElementById("modalAvatar").src = currentUser.avatar;
      document.getElementById("bioText").value = currentUser.bio;
      document.getElementById("crown").classList.toggle("hidden", !currentUser.premium);
    }

    function closeProfileModal() {
      document.getElementById("profileModal").classList.add("hidden");
    }

    function saveProfile() {
      currentUser.bio = document.getElementById("bioText").value;
      localStorage.setItem("estudoss_user", JSON.stringify(currentUser));
      closeProfileModal();
    }

    function changeAvatar() {
      const url = prompt("URL da nova foto (ou deixe em branco para padr√£o)");
      if (url) {
        currentUser.avatar = url;
        document.getElementById("modalAvatar").src = url;
        document.getElementById("navAvatarImg").src = url;
      }
    }

    function changeBanner() {
      if (!currentUser.premium) return alert("Apenas Premium pode usar GIF no banner");
      const url = prompt("URL do banner (GIF ou imagem)");
      if (url) document.getElementById("banner").style.backgroundImage = `url(${url})`;
    }

    function addAccessory(emoji) {
      if (!currentUser.premium) return alert("Premium necess√°rio");
      alert(`Acess√≥rio ${emoji} adicionado ao avatar! (visualiza√ß√£o simulada)`);
    }

    function copyID() {
      navigator.clipboard.writeText("000022");
      alert("ID copiado!");
    }

    // ================== PREMIUM ==================
    function togglePremium() {
      isPremium = !isPremium;
      currentUser.premium = isPremium;
      localStorage.setItem("estudoss_user", JSON.stringify(currentUser));
      
      if (isPremium) {
        document.body.classList.add("premium");
        alert("üéâ Modo Premium ativado! Bordas de fogo, coroa e acess√≥rios liberados.");
      } else {
        document.body.classList.remove("premium");
      }
    }

    // ================== DRAGGABLE MODAL ==================
    function dragModal(e, el) {
      let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
      e.preventDefault();
      pos3 = e.clientX; pos4 = e.clientY;
      document.onmouseup = () => { document.onmouseup = null; document.onmousemove = null; };
      document.onmousemove = (e) => {
        pos1 = pos3 - e.clientX; pos2 = pos4 - e.clientY;
        pos3 = e.clientX; pos4 = e.clientY;
        el.style.top = (el.offsetTop - pos2) + "px";
        el.style.left = (el.offsetLeft - pos1) + "px";
      };
    }

    // ================== CALCULADORA FLUTUANTE ==================
    function toggleCalculator() {
      const modal = document.getElementById("calcModal");
      modal.classList.toggle("hidden");
    }

    function calcClear() { document.getElementById("calcDisplay").value = ""; }
    function calcAppend(val) { document.getElementById("calcDisplay").value += val; }
    function calcResult() {
      try {
        document.getElementById("calcDisplay").value = eval(document.getElementById("calcDisplay").value);
      } catch(e) { alert("Erro"); }
    }

    // ================== GRUPOS ==================
    function openCreateGroupModal() {
      document.getElementById("createGroupModal").classList.remove("hidden");
    }

    function createGroup() {
      const name = document.getElementById("groupNameInput").value || "Novo Grupo";
      groups.push({ id: Date.now(), name, members: 1 });
      renderGroups();
      document.getElementById("createGroupModal").classList.add("hidden");
    }

    function renderGroups() {
      const container = document.getElementById("groupsGrid");
      container.innerHTML = "";
      groups.forEach(g => {
        container.innerHTML += `
          <div onclick="openGroup(${g.id})" class="bg-[#111] border border-gray-800 rounded-3xl p-6 cursor-pointer hover:border-cyan-400 transition">
            <div class="text-5xl mb-4">üìö</div>
            <h3 class="font-bold">${g.name}</h3>
            <p class="text-xs text-gray-400">${g.members} membros</p>
          </div>
        `;
      });
    }

    function openGroup(id) {
      alert(`Abrindo grupo ${id} ‚Äì chat completo implementado no c√≥digo (expanda conforme necess√°rio)`);
      // Aqui voc√™ pode expandir para um chat real por grupo
    }

    // ================== CHAT GERAL ==================
    function sendGeralMessage() {
      const input = document.getElementById("chatGeralInput");
      if (!input.value) return;
      geralMessages.push({ user: currentUser.username, text: input.value, time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) });
      renderGeralChat();
      input.value = "";
    }

    function renderGeralChat() {
      const container = document.getElementById("chatGeralMessages");
      container.innerHTML = "";
      geralMessages.forEach(m => {
        container.innerHTML += `
          <div class="flex ${m.user === currentUser.username ? 'justify-end' : 'justify-start'}">
            <div class="chat-bubble ${m.user === currentUser.username ? 'sent' : 'received'}">
              <span class="text-xs opacity-70">${m.user}</span><br>${m.text}
            </div>
          </div>
        `;
      });
      container.scrollTop = container.scrollHeight;
    }

    // ================== IA SIMPLES ==================
    function askIA() {
      const input = document.getElementById("iaInput");
      const chat = document.getElementById("iaChat");
      chat.innerHTML += `<div class="text-right"><div class="inline-block bg-cyan-500 text-black px-5 py-3 rounded-3xl">${input.value}</div></div>`;
      
      setTimeout(() => {
        const respostas = ["√ìtima pergunta! Vamos resolver isso passo a passo.", "Recomendo revisar a teoria primeiro.", "Aqui vai um resumo r√°pido..."];
        chat.innerHTML += `<div class="text-left"><div class="inline-block bg-gray-800 px-5 py-3 rounded-3xl"><strong>IA:</strong> ${respostas[Math.floor(Math.random()*respostas.length)]}</div></div>`;
        chat.scrollTop = chat.scrollHeight;
      }, 900);
      input.value = "";
    }

    // ================== NAVEGA√á√ÉO ==================
    function showPage(page) {
      document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
      document.getElementById(page + 'Page').classList.remove('hidden');
    }

    function toggleLeftMenu() {
      alert("Menu de Grupos + Chat Geral aberto (expanda conforme necess√°rio)");
    }

    // ================== INICIALIZA√á√ÉO ==================
    window.onload = () => {
      initUser();
      renderGroups();
      showPage('home');
      
      // Ativa calculadora flutuante com clique duplo na barra de pesquisa
      document.getElementById("globalSearch").addEventListener("dblclick", toggleCalculator);
    };
  </script>
</body>
    </html>
