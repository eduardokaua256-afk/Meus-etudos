<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudos Premium</title>
    <style>
        :root { --preto: #0b0b0b; --branco: #ffffff; --azul: #007bff; --ouro: #ffd700; --cinza: #1e1e1e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--preto); color: var(--branco); margin: 0; padding: 20px; overflow-x: hidden; }
        
        /* Layout */
        header { display: flex; justify-content: space-between; align-items: center; background: var(--azul); padding: 15px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,123,255,0.3); }
        .card { background: var(--cinza); padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px solid #333; }

        /* Janela Flutuante (Mantida Aberta) */
        #chat-window { 
            display: flex; position: fixed; bottom: 85px; right: 10px; left: 10px; 
            height: 70vh; background: var(--branco); color: var(--preto); 
            border-radius: 25px; flex-direction: column; overflow: hidden; z-index: 1001;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8); border: 2px solid transparent;
        }

        /* Estilo Premium */
        .premium-border { border: 2px solid var(--ouro) !important; animation: glow 2s infinite; }
        @keyframes glow { 0% { box-shadow: 0 0 5px var(--ouro); } 50% { box-shadow: 0 0 20px var(--ouro); } 100% { box-shadow: 0 0 5px var(--ouro); } }

        .crown { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); font-size: 20px; display: none; }
        .premium-only { display: none; color: var(--ouro); font-weight: bold; font-size: 12px; }

        /* Icones e Fotos */
        .group-thumb-container { position: relative; width: 50px; height: 50px; }
        .group-thumb { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; background: #ddd; border: 2px solid var(--azul); }
        
        /* Bot√£o Redondo de Foto (Com Long Press) */
        .btn-photo-round { 
            width: 45px; height: 45px; border-radius: 50%; background: var(--azul); 
            color: white; border: none; font-size: 20px; display: flex; 
            align-items: center; justify-content: center; cursor: pointer;
            transition: transform 0.2s; -webkit-user-select: none;
        }

        /* Anima√ß√µes Premium */
        .anim-float { animation: floating 3s ease-in-out infinite; }
        @keyframes floating { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }

        .chat-content { flex: 1; padding: 15px; overflow-y: auto; background: #f0f2f5; }
        .chat-input-area { display: flex; align-items: center; padding: 10px; background: white; gap: 10px; }
        
        /* Banner Premium */
        #premium-banner { display: none; background: linear-gradient(90deg, #000, #444); color: var(--ouro); padding: 5px; text-align: center; font-size: 12px; }
    </style>
</head>
<body>

    <header>
        <span>üìö Central Pro</span>
        <div onclick="toggleSettings()" style="cursor:pointer">‚ãÆ</div>
    </header>

    <div id="premium-banner">‚ú® MODO PREMIUM ATIVADO: Figurinhas e V√≠deos Liberados ‚ú®</div>

    <div class="card">
        <h3>Minhas Mat√©rias</h3>
        <p>O chat flutuante agora permanece aberto para facilitar seus estudos.</p>
    </div>

    <div id="chat-window">
        <div id="premium-tab" style="display:none; background: #fff8e1; padding: 10px; border-bottom: 1px solid var(--ouro);">
            <small>üëë <b>Configura√ß√µes Premium:</b></small><br>
            <button onclick="alert('Capacidade aumentada para 5000 membros!')">Aumentar Limite do Grupo</button>
            <button onclick="addAnim('coracao')">Efeito ‚ù§Ô∏è</button>
            <button onclick="addAnim('dino')">Efeito ü¶ñ</button>
        </div>

        <div class="chat-content" id="chat-box">
            <div id="setup-group">
                <h4>Criar Grupo de Estudos</h4>
                <input type="text" id="g-name" placeholder="Nome do Grupo" style="width:90%; padding:8px; margin-bottom:10px;">
                <br>
                <small>Foto/V√≠deo de Perfil:</small>
                <input type="file" id="g-file" accept="image/*,video/*" style="font-size:10px">
                <button onclick="createProGroup()" style="width:100%; margin-top:10px; background:var(--azul); color:white; border:none; padding:10px; border-radius:10px;">Criar Grupo</button>
            </div>
            <div id="active-groups"></div>
        </div>

        <div class="chat-input-area" id="input-area" style="display:none">
            <button class="btn-photo-round" id="btn-photo" 
                    onmousedown="startPress()" onmouseup="endPress()" 
                    ontouchstart="startPress()" ontouchend="endPress()">
                üñºÔ∏è
            </button>
            <input type="text" id="msg-input" placeholder="Sua mensagem..." style="flex:1; border:none; background:#eee; padding:10px; border-radius:20px;">
            <button onclick="sendMsg()" style="border:none; background:none; font-size:24px;">‚û°Ô∏è</button>
        </div>
    </div>

    <div id="book-icon" style="position:fixed; bottom:20px; right:20px; font-size:40px; cursor:move; touch-action:none;">üìñ</div>

    <script>
        let isPremium = false;
        let pressTimer;

        // Sistema de Segurar (Long Press) para Modo Premium
        function startPress() {
            pressTimer = window.setTimeout(function() {
                activatePremium();
            }, 1500); // Segure por 1.5 segundos
        }

        function endPress() {
            clearTimeout(pressTimer);
            if(!isPremium) document.getElementById('g-file').click(); 
        }

        function activatePremium() {
            isPremium = true;
            document.getElementById('chat-window').classList.add('premium-border');
            document.getElementById('premium-banner').style.display = 'block';
            document.getElementById('premium-tab').style.display = 'block';
            alert("üëë MODO PREMIUM DESBLOQUEADO!\n- V√≠deos de 5s na bio liberados\n- Figurinhas liberadas\n- √çcones de Coroa ativos");
        }

        function createProGroup() {
            const name = document.getElementById('g-name').value;
            if(!name) return;

            const list = document.getElementById('active-groups');
            const container = document.createElement('div');
            container.style = "display:flex; align-items:center; margin-bottom:15px; position:relative;";
            
            // Adiciona Coroa se for Premium
            const crownHtml = isPremium ? '<div class="crown" style="display:block">üëë</div>' : '';
            const animClass = isPremium ? 'anim-float' : '';

            container.innerHTML = `
                <div class="group-thumb-container ${animClass}">
                    ${crownHtml}
                    <div class="group-thumb" id="thumb-display" style="display:flex; align-items:center; justify-content:center; background:#007bff; color:white">üìö</div>
                </div>
                <div style="margin-left:15px">
                    <strong>${name}</strong><br>
                    <button onclick="enterChat()" style="font-size:10px">Abrir Chat</button>
                </div>
            `;
            list.appendChild(container);
            document.getElementById('setup-group').style.display = 'none';
        }

        function enterChat() {
            document.getElementById('active-groups').style.display = 'none';
            document.getElementById('input-area').style.display = 'flex';
            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<p style="text-align:center; font-size:12px;">Chat de Estudos Iniciado</p>`;
        }

        function sendMsg() {
            const input = document.getElementById('msg-input');
            if(!input.value) return;
            const msg = document.createElement('div');
            msg.innerHTML = `<b>Voc√™:</b> ${input.value}`;
            document.getElementById('chat-box').appendChild(msg);
            input.value = "";
        }

        function addAnim(tipo) {
            const chat = document.getElementById('chat-box');
            const icons = { 'coracao': '‚ù§Ô∏è', 'dino': 'ü¶ñ', 'urso': 'üêª' };
            chat.innerHTML += `<div class="anim-float" style="text-align:center; font-size:30px">${icons[tipo]}</div>`;
        }

        // Arrastar √çcone
        const icon = document.getElementById('book-icon');
        icon.addEventListener('touchmove', function(e) {
            let t = e.targetTouches[0];
            icon.style.left = t.pageX - 20 + 'px';
            icon.style.top = t.pageY - 20 + 'px';
            e.preventDefault();
        }, false);
    </script>
</body>
</html>
