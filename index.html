<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Study v18 - Ultimate</title>
    <style>
        :root {
            --bright-blue: #00d9ff;
            --ouro: #ffd700;
            --fundo: #0a0a0a;
            --card: #161616;
        }
        body { background: var(--fundo); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* HEADER */
        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 20px; background: #111; border-bottom: 1px solid #222;
        }
        
        .user-header-profile { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .profile-circle { position: relative; width: 40px; height: 40px; }
        .profile-circle img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--bright-blue); object-fit: cover; }

        /* ID FOGO AZUL */
        .id-owner {
            color: #1DA1F2 !important; font-weight: bold; font-size: 20px;
            text-shadow: 0 0 10px #00f; animation: blueFire 0.6s infinite alternate;
        }
        @keyframes blueFire {
            from { text-shadow: 0 0 10px #00d9ff, 0 0 5px #fff; }
            to { text-shadow: 0 0 20px #00f, 0 0 10px #fff; }
        }

        /* NAVEGA√á√ÉO */
        .nav-tabs { display: flex; justify-content: space-around; background: #111; padding: 10px; border-bottom: 1px solid #222; }
        .nav-tabs button { background: none; border: none; color: #888; cursor: pointer; font-weight: bold; }
        .nav-tabs button.active { color: var(--bright-blue); border-bottom: 2px solid var(--bright-blue); }

        /* CARDS */
        .container { padding: 20px; }
        .card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 15px; border-left: 4px solid var(--bright-blue); }
        .btn-main { background: var(--bright-blue); color: black; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; }

        /* JANELAS */
        .win { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #111; border: 1px solid #333; border-radius: 15px; z-index: 1000; padding: 20px; width: 90%; max-width: 400px; box-shadow: 0 0 50px rgba(0,0,0,0.9); }
        .overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index: 999; }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0; font-size:22px; color:var(--bright-blue)">Social Study</h1>
    <div class="user-header-profile" onclick="openWin('win-profile')">
        <span id="header-user-name">@User</span>
        <div class="profile-circle">
            <span id="header-premium-crown" style="display:none; position:absolute; top:-12px; left:50%; transform:translateX(-50%); font-size:18px;">üëë</span>
            <img id="header-pfp" src="https://via.placeholder.com/40">
        </div>
    </div>
</header>

<div class="nav-tabs">
    <button class="active" onclick="showTab('materias')">Mat√©rias</button>
    <button onclick="showTab('comunidade')">Comunidade</button>
</div>

<div id="tab-materias" class="container">
    <button class="btn-main" style="margin-bottom: 20px;" onclick="openWin('win-criar-grupo')">+ Criar Novo Grupo</button>
    <div id="subject-list"></div>
</div>

<div id="tab-comunidade" class="container" style="display:none;">
    <div class="card">
        <h3>üåç Comunidade Global</h3>
        <p>Bem-vindo ao mural de estudantes.</p>
        <div id="feed-comunidade"></div>
    </div>
</div>

<div id="win-profile" class="win">
    <button onclick="closeWin('win-profile')" style="float:right; background:none; color:white; border:none; font-size:20px; cursor:pointer;">X</button>
    <center>
        <div style="position:relative; width:90px;">
            <span id="p-crown" style="position:absolute; top:-15px; left:50%; transform:translateX(-50%); font-size:25px; display:none;">üëë</span>
            <img id="p-img" src="https://via.placeholder.com/90" style="width:90px; height:90px; border-radius:50%; border:3px solid var(--bright-blue); cursor:pointer;" onclick="document.getElementById('in-pfp').click()">
        </div>
        <h2 id="p-name-disp" style="color: white; margin: 10px 0;">@Usuario</h2>
<p id="p-bio-disp" style="color:#888; cursor:pointer; margin-bottom: 15px;" onclick="changeBio()">Clique para mudar a bio...</p>

<div id="status-oficial" style="margin-bottom: 20px;">
    <div style="color: #2ecc71; font-weight: bold; font-size: 14px;">‚óè Online</div>
    <div style="color: #ff4b4b; font-weight: bold; font-size: 14px;">‚óè Offline</div>
    <div style="color: white; font-size: 12px; margin-top: 5px;">
        visto por √∫ltimo hoje √†s <span id="real-time" style="color: white;">--:--</span>
    </div>
</div>

<div style="margin:15px 0;">
    <span style="font-weight:bold; color: white;">ID: </span><span class="id-owner">22</span>
</div>

</div>

<div style="margin:15px 0;">
    <span style="font-weight:bold; color: white;">ID: </span><span class="id-owner">22</span>
</div>


        <button class="btn-main" onclick="buyPremium()" style="background:var(--ouro); margin-bottom:10px;">OBTER PREMIUM üëë</button>
        <button onclick="changeName()" style="background:#222; color:white; width:100%; border:1px solid #444; padding:10px; border-radius:8px;">Configurar Perfil</button>
    </center>
</div>

<div id="win-criar-grupo" class="win">
    <h3>Criar Novo Grupo</h3>
    <input type="text" id="group-name" placeholder="Nome do Grupo" style="width:100%; padding:10px; margin-bottom:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
    <button class="btn-main" onclick="criarNovoGrupo()">Criar Grupo</button>
    <button onclick="closeWin('win-criar-grupo')" style="background:none; color:#888; border:none; width:100%; margin-top:10px; cursor:pointer;">Cancelar</button>
</div>

<div id="overlay" class="overlay" onclick="closeAll()"></div>
<input type="file" id="in-pfp" style="display:none" onchange="uploadImg(this)">

<script>
    // --- BANCO DE DADOS ---
    let materias = ["Matem√°tica", "Portugu√™s", "Ci√™ncias", "Hist√≥ria"];
    let grupos = JSON.parse(localStorage.getItem('user_groups')) || [];

    // --- NAVEGA√á√ÉO ---
    function showTab(tab) {
        document.getElementById('tab-materias').style.display = tab === 'materias' ? 'block' : 'none';
        document.getElementById('tab-comunidade').style.display = tab === 'comunidade' ? 'block' : 'none';
    }

    function openWin(id) { document.getElementById(id).style.display = 'block'; document.getElementById('overlay').style.display = 'block'; }
    function closeWin(id) { document.getElementById(id).style.display = 'none'; document.getElementById('overlay').style.display = 'none'; }
    function closeAll() { document.querySelectorAll('.win').forEach(w => w.style.display='none'); document.getElementById('overlay').style.display='none'; }

    // --- RENDERIZA√á√ÉO ---
    function renderApp() {
        const list = document.getElementById('subject-list');
        let html = materias.map(m => `<div class="card"><h3>${m}</h3><p>Grupos ativos nesta mat√©ria.</p></div>`).join('');
        
        // Adiciona grupos criados pelo usu√°rio
        grupos.forEach(g => {
            html += `<div class="card" style="border-left-color: #0f0;"><h3>${g}</h3><p>Grupo criado por voc√™.</p></div>`;
        });
        
        list.innerHTML = html;
    }

    function criarNovoGrupo() {
        let nome = document.getElementById('group-name').value;
        if(nome) {
            grupos.push(nome);
            localStorage.setItem('user_groups', JSON.stringify(grupos));
            renderApp();
            closeWin('win-criar-grupo');
            alert("Grupo criado!");
        }
    }
function initApp() {
    // 1. Tenta carregar as mat√©rias (Se as mat√©rias sumiram, isso aqui traz de volta)
    if (typeof renderSubjects === "function") renderSubjects();
    if (typeof renderGroups === "function") renderGroups();

    // 2. Carrega o Hor√°rio Real (Branco)
    const agora = new Date();
    const h = agora.getHours().toString().padStart(2, '0');
    const m = agora.getMinutes().toString().padStart(2, '0');
    if(document.getElementById('real-time')) {
        document.getElementById('real-time').innerText = h + ":" + m;
    }

    // 3. Carrega o Nome Salvo
    let n = localStorage.getItem('saved_username');
    if(n) {
        if(document.getElementById('p-name-disp')) document.getElementById('p-name-disp').innerText = "@" + n;
        if(document.getElementById('header-user-name')) document.getElementById('header-user-name').innerText = "@" + n;
    }
}

// 4. ESSA LINHA PRECISA EXISTIR PARA O SITE LIGAR
initApp();

    function changeName() {
        let n = prompt("Seu nome de usu√°rio:");
        if(n) {
            localStorage.setItem('saved_username', n);
            document.getElementById('p-name-disp').innerText = "@" + n;
            document.getElementById('header-user-name').innerText = "@" + n;
        }
    }

    function changeBio() {
        let b = prompt("Sua bio:");
        if(b) {
            localStorage.setItem('saved_bio', b);
            document.getElementById('p-bio-disp').innerText = b;
        }
    }

    function buyPremium() {
        localStorage.setItem('is_premium', 'true');
        ativarVisualPremium();
        alert("üëë Agora voc√™ √© Premium!");
    }

    function ativarVisualPremium() {
        document.getElementById('p-crown').style.display = 'block';
        document.getElementById('header-premium-crown').style.display = 'block';
        document.getElementById('p-img').style.border = "3px solid var(--ouro)";
        document.getElementById('header-pfp').style.border = "2px solid var(--ouro)";
        document.getElementById('p-name-disp').style.color = var(--ouro);
    }

    function uploadImg(input) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('p-img').src = e.target.result;
            document.getElementById('header-pfp').src = e.target.result;
            localStorage.setItem('user_pfp', e.target.result);
        };
        reader.readAsDataURL(input.files[0]);
    }

    // Ligar tudo
    initApp();function initApp() {
    // ... outros c√≥digos que voc√™ j√° tem ...
    
    atualizarHorarioReal(); // Adicione apenas esta linha aqui dentro
}

    function atualizarHorarioReal() {
    const agora = new Date();
    const horas = agora.getHours().toString().padStart(2, '0');
    const minutos = agora.getMinutes().toString().padStart(2, '0');
    
    // Procura o ID real-time e coloca o hor√°rio em branco
    const elementoHora = document.getElementById('real-time');
    if(elementoHora) {
        elementoHora.innerText = horas + ":" + minutos;
    }
}

// Executa a fun√ß√£o assim que o site abre
atualizarHorarioReal();

</script>

</body>
</html>
